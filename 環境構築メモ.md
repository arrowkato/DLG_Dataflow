# 1. 構築時の注意
apache-beam[gcp] がインストールできなかった場合は、
```bash
pip install 'apache-beam[gcp]'
```

# Dataflowの環境構築
## 2.1 apache-beam[gcp]をインストールできたことの確認

書きを実行する。
```bash
python wordcount.py --output ./output
```
output-00000-of-00001 というファイルができており、
下記のように出力されていればOK。
```
KING: 243
LEAR: 236
DRAMATIS: 1
PERSONAE: 1
king: 65
・・・ 以下略 ・・・
```

## 2.2. Dataflowが動作することの確認
service account keyをもらう
ローカルに配置する

```bash
REGION=us-central1
BUCKET=gs://dlg-dataflow-sample
TMP_LOCATION_BUCKET_URI=$BUCKET/tmp
OUTPUT_BUCKET_URI=$BUCKET/wordcount/outputs 
PROJECT=salck-visualization

python wordcount.py \
  --region $REGION \
  --input gs://dataflow-samples/shakespeare/kinglear.txt \
  --output $OUTPUT_BUCKET_URI \
  --runner DataflowRunner \
  --project $PROJECT \
  --temp_location $OUTPUT_BUCKET_URI 
```
gs://dlg-dataflow-sample/wordcount/outputs-00000-of-00001 
というファイルができていればOK.
ただし、最終更新日付で自分が実行した時間であることを確認すること。

